<Window x:Class="NbpCurrencyTool.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="NBP Currency Tool" Height="300" Width="450"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Converter -->
        <StackPanel Grid.Row="0" Visibility="{Binding ShowConverter, Converter={StaticResource BoolToVisibility}}">
            <StackPanel Orientation="Horizontal" Margin="0,20,0,10" HorizontalAlignment="Center">
                <ComboBox Width="80" ItemsSource="{Binding Rates}" SelectedItem="{Binding FromCurrency}" DisplayMemberPath="Code"/>
                <TextBlock Text=" to " VerticalAlignment="Center" Margin="10,0"/>
                <ComboBox Width="80" ItemsSource="{Binding Rates}" SelectedItem="{Binding ToCurrency}" DisplayMemberPath="Code"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,10" HorizontalAlignment="Center">
                <TextBlock Text="Amount:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <TextBox Width="150" Text="{Binding AmountText, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>

            <Button Content="Calculate" Width="200" Margin="0,0,0,10" Command="{Binding ConvertCommand}" HorizontalAlignment="Center"/>
            <TextBlock FontSize="18" FontWeight="Bold" Text="{Binding ResultDisplay}" HorizontalAlignment="Center" Margin="0,20"/>
        </StackPanel>

        <!-- List -->
        <DataGrid Grid.Row="0"
          Visibility="{Binding ShowList, Converter={StaticResource BoolToVisibility}}"
          ItemsSource="{Binding Rates}"
          AutoGenerateColumns="False"
          IsReadOnly="True"
          CanUserResizeRows="False"
          CanUserResizeColumns="True"
          CanUserSortColumns="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Code" Binding="{Binding Code}"/>
                <DataGridTextColumn Header="Currency" Binding="{Binding Currency}"/>
                <DataGridTextColumn Header="Unit" Binding="{Binding Unit}"/>
                <DataGridTextColumn Header="Rate" Binding="{Binding Rate}"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Status Message -->
        <TextBlock Grid.Row="1"
           Text="{Binding StatusMessage}"
           Foreground="{Binding StatusForeground}"
           TextWrapping="Wrap"
           MaxWidth="400"
           FontWeight="Bold"
           HorizontalAlignment="Center"
           Opacity="0">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ShowStatusMessage}" Value="True">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.3"/>
                                        <DoubleAnimation Storyboard.TargetProperty="Opacity" From="1" To="0" Duration="0:0:2" BeginTime="0:0:2"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>

        <!-- Buttons at the bottom -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
            <Button Content="Fetch" Command="{Binding FetchCommand}" Width="100" Margin="5,0"/>
            <Button Content="Converter" Command="{Binding ShowConverterCommand}" Width="100" Margin="5,0"/>
            <Button Content="List" Command="{Binding ShowListCommand}" Width="100" Margin="5,0"/>
        </StackPanel>
    </Grid>
</Window>